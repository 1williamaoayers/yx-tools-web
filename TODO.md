# 📋 TODO - 项目战略看板

## [!] 永久警告

- ⚠️ 所有输出必须使用中文
- ⚠️ 测试未通过前禁止打勾
- ⚠️ 每次对话先读 notes.md 和 TODO.md

---

## ✅ 已完成

- [x] 2026-01-21: 项目配置初始化 - Kiro 规则转换为 Antigravity 格式
- [x] 2026-01-21: 防失忆机制升级 - 实时锚点 + /resume 工作流 + 强制打桩
- [x] 2026-01-21: 门禁检查系统 - 三道门禁 + /check 自检工作流
- [x] 2026-01-21: 自动规则检查 hook - agentStop 时自动执行自主验证
- [x] 2026-01-21: 项目全面分析 - 技术栈、架构、代码质量、改进建议
- [x] 2026-01-21: GitHub Action 自动构建 - 推送代码自动构建 Docker 镜像并推送到 ghcr.io
- [x] 2026-01-21: 完成标准定义 - 更新规则和 hook，明确 Web 项目验证要求
- [x] 2026-01-21: Web 项目完整验证 - 容器启动 + 页面访问 + 功能测试 + 截图证据

---

## 📌 当前任务

- [x] 🚧 正在进行: 获取 yx-tools 完整参数列表 (完成于 19:15)
  - **项目目标**: Web 前端完全代替 CLI 交互
  - **核心要求**: 前端表单参数 = 后端 CLI 参数（一一对应）
  - **新增需求**: 文件上传 API（用于上传 IP 列表等文件）
  - **结果**: 已成功提取所有 16 个参数及其默认值
- [x] ✅ 完成: 升级 Web 面板功能
  - [x] 后端改造: 更新 `app.py` 支持所有新参数
  - [x] 前端改造: 更新 `index.html` 添加完整表单
  - [x] 逻辑适配: 更新 `app.js` 处理参数联动 (如选择 normal 模式显示 region)
  - [x] 新增功能: 实现文件上传 API (支持 csv/txt)
  - [x] 功能调整: 根据用户要求，移除了有兼容性问题的"手动上传"功能
  - [x] 规则升级: 制定并写入"防卡死协议" (.antigravityrules + workflow)

---

## 💡 成功修复经验

（记录有价值的解决方案，供将来参考）

- **2026-01-21**: 修复 `SyntaxError: source code string cannot contain null bytes`
  - **症状**: 容器不断重启，日志报错 null bytes。
  - **原因**: `web/app.py` 文件末尾包含非法的 Null 字节 (UTF-16 残留)。
  - **修复**: 重写文件，移除末尾乱码。
- **2026-01-21**: yx-tools 脚本上传限制
  - **症状**: yx-tools 脚本在上传时会强制执行测速，没有"只上传不测速"的独立模式。
  - **决策**: 尝试后端独立实现上传但未启用，最终决定彻底移除手动上传功能，聚焦于完整流程。

