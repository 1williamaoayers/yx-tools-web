# yx-tools V7 专业版使用指南

## 🎨 全新设计特点

### ✅ 完整功能覆盖
- **多页导航系统** - 仪表盘、参数配置、测速结果、上传历史、运行日志
- **参数说明工具提示** - 每个参数都有详细说明（鼠标悬停 ℹ️ 图标查看）
- **实时状态监控** - 侧边栏和仪表盘实时显示系统运行状态
- **上传历史追踪** - 自动记录每次上传的时间、方式和目标
- **完全响应式** - PC 大屏和手机小屏完美适配

### 🎯 设计理念
- **现代化深色主题** - 减少眼疲劳，专业感强
- **清晰的信息层次** - 重要信息一目了然
- **平滑的交互体验** - 动画过渡自然流畅
- **移动优先设计** - 手机端操作同样便捷

## 📱 界面布局说明

### 桌面端布局
```
+----------+----------------------------------+
| Sidebar  |  Main Content                    |
|          |                                  |
| - 仪表盘 |  [当前选中的页面内容]              |
| - 参数   |                                  |
| - 结果   |                                  |
| - 历史   |                                  |
| - 日志   |                                  |
|          |                                  |
| [状态]   |                                  |
+----------+----------------------------------+
```

### 手机端布局
- 顶部：收起菜单 + Logo + 状态指示
- 点击左上角菜单图标展开侧边栏
- 内容区域纵向滚动

## 🧭 功能模块详解

### 1. 仪表盘（Dashboard）
**用途**：快速概览和执行常用操作

**功能：**
- ▶️ **立即测速** - 一键启动测速任务
- 📊 **查看结果** - 跳转到结果页面
- 🖥️ **查看日志** - 跳转到日志页面
- **运行状态卡片** - 显示当前状态、最近测速时间
- **定时任务卡片** - 显示 Cron 状态和下次执行时间
- **最新结果预览** - 显示前 5 条测速结果

**推荐用法：**
日常使用时，80% 的操作可以在仪表盘完成。

---

### 2. 参数配置（Config）
**用途**：精细化配置所有测速参数

**基础设置：**
- **测速模式** 
  - 🟢 小白模式：使用默认参数，适合新手
  - 🔵 常规模式：完全自定义，适合有经验用户
  - 🟣 优选反代：从现有结果筛选，适合二次优化

- **地区代码**（仅常规模式）
  - 示例：`HKG,SIN,TYO`
  - 支持逗号分隔多个地区

- **CSV 文件**（仅优选反代模式）
  - 上传之前生成的 `result.csv`
  - 支持拖拽上传

- **IPv6 开关**
  - 勾选后使用 IPv6 进行测速

**高级参数（带说明提示）：**
- **下载速度下限** - 筛选速度阈值
- **测试 IP 数量** - 保留优质 IP 数量
- **延迟上限** - 筛选延迟阈值
- **并发线程数** - 影响测速速度，建议 100-300

**结果上传：**
- **不上传** - 仅本地保存
- **Worker API** - 上传到 Cloudflare Workers
  - 需填写：Worker 域名、UUID/路径
- **GitHub** - 上传到 GitHub 仓库
  - 需填写：Token、仓库路径、文件路径

**通用上传选项：**
- 上传数量：只上传 Top N 个 IP
- 清空旧数据：上传前清空目标位置的旧数据

**定时任务：**
- 使用标准 Cron 表达式
- 示例：`0 4 * * *` 表示每天凌晨 4 点
- 点击"设置定时任务"按钮激活

**操作按钮：**
- 💾 **保存配置** - 保存当前所有设置
- **重置为默认** - 还原所有参数到初始值

---

### 3. 测速结果（Results）
**用途**：查看当前测速获得的优选 IP 列表

**显示内容：**
- IP 地址
- 下载速度
- 延迟
- 数据中心位置

**操作：**
- 🔄 **刷新** - 手动刷新数据（也可以等待自动刷新）
- **记录数量徽章** - 显示当前共有多少条结果

**数据来源：**
- 读取 `/data/result.csv` 文件
- 每 5 秒自动更新

---

### 4. 上传历史（History）
**用途**：追踪所有上传记录

**记录内容：**
- **时间** - 上传发生的具体时间
- **上传方式** - Worker API / GitHub
- **目标地址** - 具体的域名或仓库路径
- **IP 数量** - 上传了多少个 IP
- **状态** - 成功 / 失败

**数据存储：**
- 前端 localStorage 存储
- 最多保留 50 条记录
- 即使刷新页面也不会丢失

**注意事项：**
- 当前版本为前端 mock 数据
- 未来版本将集成后端真实上传接口

---

### 5. 运行日志（Logs）
**用途**：实时查看后端运行状态

**功能：**
- **实时终端** - 黑底绿字的专业终端样式
- 每秒自动刷新
- 显示后端脚本的标准输出
- 自动滚动到最新日志

**操作：**
- 🗑️ **清空日志** - 清空当前显示的所有日志

**典型日志内容：**
```
> 测速任务已启动，正在执行...
正在扫描 HKG 地区...
找到 324 个可用 IP
开始测速...
已完成 10/324
...
测速完成！优选结果已保存
```

---

## 💡 使用建议

### 新手使用流程
1. 打开仪表盘
2. 点击"立即测速"
3. 切换到"日志"页面查看进度
4. 测速完成后切换到"结果"页面

### 进阶使用流程
1. 进入"参数配置"
2. 选择"常规模式"
3. 设置地区代码（如 `HKG`）
4. 调整速度和延迟阈值
5. 配置上传选项（API 或 GitHub）
6. 保存配置
7. 返回仪表盘点击"立即测速"

### 定时任务使用
1. 在"参数配置"页面底部设置 Cron
2. 填写表达式，如 `0 4 * * *`
3. 点击"设置定时任务"
4. 仪表盘会显示"已激活"

### 优选反代模式
1. 先运行一次常规测速
2. 下载生成的 `result.csv`
3. 切换到"优选反代"模式
4. 上传 CSV 文件
5. 调整筛选条件（速度/延迟）
6. 再次测速（仅筛选，不重新测试）

---

## 📌 参数说明速查表

| 参数 | 默认值 | 推荐范围 | 说明 |
|------|--------|---------|------|
| 测速模式 | 常规 | - | 选择适合您的模式 |
| 地区代码 | 空（全球）| HKG,SIN,TYO 等 | 缩小扫描范围提升速度 |
| 下载下限 | 5 MB/s | 1-20 | 根据需求调整 |
| IP 数量 | 10 | 5-50 | 保留更多备选 |
| 延迟上限 | 300 ms | 100-500 | 低延迟 = 更快响应 |
| 并发线程 | 200 | 100-300 | 太高可能被限流 |
| IPv6 | 关闭 | - | 如果网络支持可开启 |

---

## 🔧 故障排查

### 界面无法加载
1. 检查 Docker 容器是否运行
2. 确认端口 2030 未被占用
3. 清除浏览器缓存后刷新

### 测速无结果
1. 查看"日志"页面的错误信息
2. 确认核心容器 `cf-speedtest` 正在运行
3. 检查网络连接

### 上传失败
1. 确认 Token 和域名填写正确
2. 检查日志查看具体错误
3. 验证网络可以访问目标 API

### 定时任务不执行
1. 确认 Cron 表达式格式正确
2. 查看容器日志：`docker logs cf-speedtest`
3. 重新设置定时任务

---

## 🎨 自定义配色（开发者选项）

如果你想自定义配色方案，可以编辑 `web/static/style.css` 中的 CSS 变量：

```css
:root {
    --color-primary: #6366f1;       /* 主色调 */
    --color-accent: #14b8a6;        /* 强调色 */
    --color-success: #22c55e;       /* 成功绿 */
    --color-bg-primary: #0a0e27;    /* 主背景 */
    --color-bg-card: #1a1f3a;       /* 卡片背景 */
}
```

---

## 📱 移动端使用提示

1. **打开侧边栏** - 点击左上角三横线图标
2. **切换页面** - 点击侧边栏中的导航项
3. **关闭侧边栏** - 点击内容区域
4. **快速操作** - 仪表盘的大按钮适配触屏

---

## 🚀 性能优化建议

1. **减少并发数** - 如果服务器性能有限
2. **分批测速** - 不要设置过大的 IP 数量
3. **定时避峰** - Cron 设置在凌晨执行
4. **清理日志** - 定期清空旧日志释放空间

---

## 📞 技术支持

如遇问题，请提供以下信息：
- 浏览器版本
- 操作系统
- 错误截图
- 日志内容（如有）

GitHub Issues: https://github.com/1williamaoayers/yx-tools-web/issues

---

**感谢使用 yx-tools Professional！** 🎉
